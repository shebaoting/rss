{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@shebaoting/rss/./src/common/index.ts","webpack://@shebaoting/rss/./src/forum/components/RssFeedList.js","webpack://@shebaoting/rss/./src/forum/index.js","webpack://@shebaoting/rss/external root \"flarum.core.compat['common/Component']\"","webpack://@shebaoting/rss/external root \"flarum.core.compat['common/app']\"","webpack://@shebaoting/rss/external root \"flarum.core.compat['common/extend']\"","webpack://@shebaoting/rss/external root \"flarum.core.compat['forum/app']\"","webpack://@shebaoting/rss/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@shebaoting/rss/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@shebaoting/rss/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@shebaoting/rss/webpack/bootstrap","webpack://@shebaoting/rss/webpack/runtime/compat get default export","webpack://@shebaoting/rss/webpack/runtime/define property getters","webpack://@shebaoting/rss/webpack/runtime/hasOwnProperty shorthand","webpack://@shebaoting/rss/webpack/runtime/make namespace object","webpack://@shebaoting/rss/./forum.ts"],"sourcesContent":["import app from 'flarum/common/app';\n\napp.initializers.add('shebaoting/rss', () => {\n  console.log('[shebaoting/rss] Hello, forum and admin!');\n});\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\n\nexport default class RssFeedList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.feeds = [];\n    this.loadFeeds();\n  }\n\n  loadFeeds() {\n    app\n      .request({\n        method: 'GET',\n        url: app.forum.attribute('apiUrl') + '/rss-items', // 调用后端获取 RSS 内容\n      })\n      .then((feeds) => {\n        this.feeds = feeds.data;\n        m.redraw();\n      });\n  }\n\n  view() {\n    return (\n      <div className=\"RssFeedList\">\n        {this.feeds.map((feed) => (\n          <div className=\"RssFeed-item\">\n            <a href={feed.attributes.link} target=\"_blank\">\n              {feed.attributes.title}\n            </a>\n            <p>{feed.attributes.content}</p>\n          </div>\n        ))}\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport RssFeedList from './components/RssFeedList';\napp.initializers.add('shebaoting/rss', () => {\n  extend(IndexPage.prototype, 'navItems', (items) => {\n    items.add(\n      'rss',\n      m(\n        'a',\n        {\n          href: '#',\n          onclick: () => {\n            app.rssMode = true; // 设置 RSS 模式\n            app.current.get('route').refresh(); // 刷新当前路由\n          },\n        },\n        'RSS Aggregator'\n      ),\n      -10\n    );\n  });\n\n  extend(IndexPage.prototype, 'view', function (vnode) {\n    if (app.rssMode) {\n      vnode.children[1] = m(RssFeedList); // 替换帖子列表部分\n    }\n  });\n\n  console.log('[shebaoting/rss] RSS Aggregator link added to the navbar!');\n});\n","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/app'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/IndexPage'];","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/common';\nexport * from './src/forum';\n"],"names":["app","initializers","add","console","log","Component","RssFeedList","_Component","apply","arguments","_inheritsLoose","_proto","prototype","oninit","vnode","call","feeds","loadFeeds","_this","request","method","url","forum","attribute","then","data","m","redraw","view","className","map","feed","href","attributes","link","target","title","content","default","extend","IndexPage","items","onclick","rssMode","current","get","refresh","children","setPrototypeOf","t","o","Object","create","constructor","_setPrototypeOf","e","bind","__proto__"],"sourceRoot":""}