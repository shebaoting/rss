{"version":3,"file":"forum.js","mappings":";;;;;;;;;;;;;;AAAoC;AAEpCA,qEAAgB,CAACE,GAAG,CAAC,gBAAgB,EAAE,YAAM;EAC3CC,OAAO,CAACC,GAAG,CAAC,0CAA0C,CAAC;AACzD,CAAC,CAAC;;;;;;;;;;;;;;;;;;;ACJ8C;AAAA,IAE3BE,WAAW,0BAAAC,UAAA;EAAA,SAAAD,YAAA;IAAA,OAAAC,UAAA,CAAAC,KAAA,OAAAC,SAAA;EAAA;EAAAC,oFAAA,CAAAJ,WAAA,EAAAC,UAAA;EAAA,IAAAI,MAAA,GAAAL,WAAA,CAAAM,SAAA;EAAAD,MAAA,CAC9BE,MAAM,GAAN,SAAAA,MAAMA,CAACC,KAAK,EAAE;IACZP,UAAA,CAAAK,SAAA,CAAMC,MAAM,CAAAE,IAAA,OAACD,KAAK;IAClB,IAAI,CAACE,KAAK,GAAG,EAAE;IACf,IAAI,CAACC,SAAS,CAAC,CAAC;EAClB,CAAC;EAAAN,MAAA,CAEDM,SAAS,GAAT,SAAAA,SAASA,CAAA,EAAG;IAAA,IAAAC,KAAA;IACVlB,GAAG,CACAmB,OAAO,CAAC;MACPC,MAAM,EAAE,KAAK;MACbC,GAAG,EAAErB,GAAG,CAACsB,KAAK,CAACC,SAAS,CAAC,QAAQ,CAAC,GAAG;IACvC,CAAC,CAAC,CACDC,IAAI,CAAC,UAACR,KAAK,EAAK;MACfE,KAAI,CAACF,KAAK,GAAGA,KAAK,CAACS,IAAI;MACvBC,CAAC,CAACC,MAAM,CAAC,CAAC;IACZ,CAAC,CAAC;EACN,CAAC;EAAAhB,MAAA,CAEDiB,IAAI,GAAJ,SAAAA,IAAIA,CAAA,EAAG;IACL,OACEF,CAAA;MAAKG,SAAS,EAAC;IAAa,GAC1BH,CAAA;MAAKG,SAAS,EAAC;IAAgB,GAC7BH,CAAA;MAAI,SAAM;IAA4B,GACnC,IAAI,CAACV,KAAK,CAACc,GAAG,CAAC,UAACC,IAAI;MAAA,OACnBL,CAAA,aACEA,CAAA;QAAK,SAAM;MAAoB,GAC7BA,CAAA;QAAKG,SAAS,EAAC;MAAkD,GAC/DH,CAAA;QAAGM,IAAI,EAAED,IAAI,CAACE,UAAU,CAACC,IAAK;QAACC,MAAM,EAAC,QAAQ;QAACN,SAAS,EAAC;MAAyB,GAChFH,CAAA;QAAI,SAAM;MAA0B,GAAEK,IAAI,CAACE,UAAU,CAACG,KAAU,CAAC,EACjEV,CAAA;QAAI,SAAM;MAAyB,GACjCA,CAAA;QAAI,SAAM;MAAW,GACnBA,CAAA;QAAM,SAAM;MAAW,GACrBA,CAAA;QAAM,SAAM,uDAAuD;QAACW,KAAK,EAAC;MAAoB,GAC5FX,CAAA;QAAM,SAAM;MAAe,GACzBA,CAAA;QAAG,SAAM;MAA0C,CAAI,CAAC,EACxDA,CAAA;QAAM,SAAM;MAAe,GAAEK,IAAI,CAACE,UAAU,CAACK,SAAgB,CACzD,CACF,CACF,CACJ,CAAC,EAELZ,CAAA;QAAI,SAAM;MAAmB,GAC3BA,CAAA,eAAM,qBACA,EAAAA,CAAA,eAAOK,IAAI,CAACE,UAAU,CAACM,YAAmB,CAC1C,CACJ,CACF,CACH,CACA,CACF,CACH,CAAC;IAAA,CACN,CACC,CACD,CACF,CAAC;EAEV,CAAC;EAAA,OAAAjC,WAAA;AAAA,EAzDsCD,gEAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFf;AACc;AACO;AACE;AAClB;AACF;AAAA,IACjBwC,WAAW,0BAAAC,KAAA;EAAA,SAAAD,YAAA;IAAA,OAAAC,KAAA,CAAAtC,KAAA,OAAAC,SAAA;EAAA;EAAAC,oFAAA,CAAAmC,WAAA,EAAAC,KAAA;EAAA,IAAAnC,MAAA,GAAAkC,WAAA,CAAAjC,SAAA;EAAAD,MAAA,CAC9BE,MAAM,GAAN,SAAAA,MAAMA,CAACC,KAAK,EAAE;IACZgC,KAAA,CAAAlC,SAAA,CAAMC,MAAM,CAAAE,IAAA,OAACD,KAAK;IAClBd,gEAAY,CAAC,gBAAgB,CAAC,CAAC,CAAC;EAClC,CAAC;EAAAW,MAAA,CAEDiB,IAAI,GAAJ,SAAAA,IAAIA,CAAA,EAAG;IACL,OACEF,CAAA;MAAKG,SAAS,EAAC;IAAW,GACvBc,kFAAmB,CAACK,IAAI,CAAC,CAAC,EAAC,GAAC,EAC7BtB,CAAA;MAAKG,SAAS,EAAC;IAAW,GACxBH,CAAA;MAAKG,SAAS,EAAC;IAAkB,GAC/BH,CAAA;MAAKG,SAAS,EAAC;IAAuB,GACpCH,CAAA,aAAKgB,sEAAS,CAACC,kFAAmB,CAACM,YAAY,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAAM,CAAC,KAC/D,CAAC,EACNxB,CAAA;MAAKG,SAAS,EAAC;IAAoD,GACjEH,CAAA,CAACkB,mDAAU,MAAE,CAAC,EACdlB,CAAA,CAACpB,oDAAW,MAAE,CAAC,KACZ,CACF,CACF,CACF,CAAC;EAEV,CAAC;EAAA,OAAAuC,WAAA;AAAA,EAvBsCJ,sEAAI;;;;;;;;;;;;;;;;;;;;;;;;ACNM;AACE;AAClB;AAAA,IAEdY,cAAc,0BAAAC,MAAA;EAAA,SAAAD,eAAA;IAAA,OAAAC,MAAA,CAAA9C,KAAA,OAAAC,SAAA;EAAA;EAAAC,oFAAA,CAAA2C,cAAA,EAAAC,MAAA;EAAA,IAAA3C,MAAA,GAAA0C,cAAA,CAAAzC,SAAA;EAAAD,MAAA,CACjCE,MAAM,GAAN,SAAAA,MAAMA,CAACC,KAAK,EAAE;IACZwC,MAAA,CAAA1C,SAAA,CAAMC,MAAM,CAAAE,IAAA,OAACD,KAAK;IAElB,IAAI,CAACO,GAAG,GAAG,EAAE,CAAC,CAAC;IACf,IAAI,CAACkC,SAAS,GAAG,EAAE,CAAC,CAAC;IACrB,IAAI,CAACC,MAAM,GAAG,IAAI,CAAC,CAAC;IACpB,IAAI,CAACC,OAAO,GAAG,IAAI,CAAC,CAAC;;IAErBtD,OAAO,CAACC,GAAG,CAAC,qEAAqE,CAAC;;IAElF;IACA,IAAI,CAACsD,gBAAgB,CAAC,CAAC;EACzB,CAAC;EAAA/C,MAAA,CAED+C,gBAAgB,GAAhB,SAAAA,gBAAgBA,CAAA,EAAG;IAAA,IAAAxC,KAAA;IACjBf,OAAO,CAACC,GAAG,CAAC,6DAA6D,CAAC;IAE1EJ,+DACU,CAAC;MACPoB,MAAM,EAAE,KAAK;MACbC,GAAG,EAAErB,6DAAS,CAACuB,SAAS,CAAC,QAAQ,CAAC,GAAG,iBAAiB,CAAE;IAC1D,CAAC,CAAC,CACDC,IAAI,CAAC,UAACmC,QAAQ,EAAK;MAClB,IAAIA,QAAQ,CAAClC,IAAI,CAACmC,MAAM,GAAG,CAAC,EAAE;QAC5B,IAAMC,QAAQ,GAAGF,QAAQ,CAAClC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;QACnCP,KAAI,CAACsC,MAAM,GAAGK,QAAQ,CAACC,EAAE;QACzB5C,KAAI,CAACG,GAAG,GAAGwC,QAAQ,CAAC5B,UAAU,CAACZ,GAAG;QAClCH,KAAI,CAACqC,SAAS,GAAGM,QAAQ,CAAC5B,UAAU,CAACG,KAAK;QAC1CjC,OAAO,CAACC,GAAG,CAAC,mCAAmC,EAAEyD,QAAQ,CAAC;MAC5D,CAAC,MAAM;QACL1D,OAAO,CAACC,GAAG,CAAC,uDAAuD,CAAC;MACtE;MAEAc,KAAI,CAACuC,OAAO,GAAG,KAAK,CAAC,CAAC;MACtB/B,CAAC,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC;IACd,CAAC,CAAC,SACI,CAAC,UAACoC,KAAK,EAAK;MAChB5D,OAAO,CAAC4D,KAAK,CAAC,+CAA+C,EAAEA,KAAK,CAAC;MACrE7C,KAAI,CAACuC,OAAO,GAAG,KAAK;MACpB/B,CAAC,CAACC,MAAM,CAAC,CAAC;IACZ,CAAC,CAAC;EACN,CAAC;EAAAhB,MAAA,CAEDkB,SAAS,GAAT,SAAAA,SAASA,CAAA,EAAG;IACV,OAAO,6BAA6B;EACtC,CAAC;EAAAlB,MAAA,CAEDyB,KAAK,GAAL,SAAAA,KAAKA,CAAA,EAAG;IACN,OAAO,WAAW;EACpB,CAAC;EAAAzB,MAAA,CAEDqD,OAAO,GAAP,SAAAA,OAAOA,CAAA,EAAG;IAAA,IAAAC,MAAA;IACR;IACA,IAAI,IAAI,CAACR,OAAO,EAAE;MAChBtD,OAAO,CAACC,GAAG,CAAC,4DAA4D,CAAC;MACzE,OACEsB,CAAA;QAAKG,SAAS,EAAC;MAAY,GACzBH,CAAA,YAAG,uBAAS,CACT,CAAC;IAEV;IAEAvB,OAAO,CAACC,GAAG,CAAC,6DAA6D,EAAE,IAAI,CAACiB,GAAG,EAAE,gBAAgB,EAAE,IAAI,CAACkC,SAAS,CAAC;;IAEtH;IACA,OACE7B,CAAA;MAAKG,SAAS,EAAC;IAAY,GACzBH,CAAA;MAAKG,SAAS,EAAC;IAAY,GACzBH,CAAA,gBAAO,0BAAW,CAAC,EACnBA,CAAA;MACEG,SAAS,EAAC,aAAa;MACvBqC,WAAW,EAAC,4CAAS;MACrBC,KAAK,EAAE,IAAI,CAACZ,SAAU;MACtBa,OAAO,EAAE,SAATA,OAAOA,CAAGC,CAAC,EAAK;QACdJ,MAAI,CAACV,SAAS,GAAGc,CAAC,CAAClC,MAAM,CAACgC,KAAK,CAAC,CAAC;QACjChE,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAE6D,MAAI,CAACV,SAAS,CAAC;MACpE;IAAE,CACH,CACE,CAAC,EACN7B,CAAA;MAAKG,SAAS,EAAC;IAAY,GACzBH,CAAA,gBAAO,kBAAa,CAAC,EACrBA,CAAA;MACEG,SAAS,EAAC,aAAa;MACvBqC,WAAW,EAAC,qCAAY;MACxBC,KAAK,EAAE,IAAI,CAAC9C,GAAI,CAAC;MAAA;MACjB+C,OAAO,EAAE,SAATA,OAAOA,CAAGC,CAAC,EAAK;QACdJ,MAAI,CAAC5C,GAAG,GAAGgD,CAAC,CAAClC,MAAM,CAACgC,KAAK,CAAC,CAAC;QAC3BhE,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAE6D,MAAI,CAAC5C,GAAG,CAAC;MACxD;IAAE,CACH,CACE,CAAC,EACNK,CAAA;MAAKG,SAAS,EAAC;IAAY,GACzBH,CAAA,CAAC0B,wEAAM;MAACvB,SAAS,EAAC,wBAAwB;MAACyC,OAAO,EAAE,IAAI,CAACC,QAAQ,CAACC,IAAI,CAAC,IAAI,CAAE;MAACf,OAAO,EAAE,IAAI,CAACA;IAAQ,GAAC,cAE7F,CACL,CACF,CAAC;EAEV;;EAEA;EAAA;EAAA9C,MAAA,CACA4D,QAAQ,GAAR,SAAAA,QAAQA,CAACF,CAAC,EAAE;IAAA,IAAAI,MAAA;IACVJ,CAAC,CAACK,cAAc,CAAC,CAAC;IAClB,IAAI,CAACjB,OAAO,GAAG,IAAI;IACnBtD,OAAO,CAACC,GAAG,CAAC,4CAA4C,EAAE,IAAI,CAACiB,GAAG,EAAE,gBAAgB,EAAE,IAAI,CAACkC,SAAS,CAAC;;IAErG;IACA,IAAI,CAAC,IAAI,CAAClC,GAAG,IAAI,CAAC,IAAI,CAACkC,SAAS,EAAE;MAChCvD,8DAAU,CAAC4E,IAAI,CAAC;QAAEC,IAAI,EAAE;MAAQ,CAAC,EAAE,iBAAiB,CAAC;MACrD,IAAI,CAACpB,OAAO,GAAG,KAAK;MACpB;IACF;IAEA,IAAMrC,MAAM,GAAG,IAAI,CAACoC,MAAM,GAAG,OAAO,GAAG,MAAM,CAAC,CAAC;IAC/C,IAAMsB,MAAM,GAAG,IAAI,CAACtB,MAAM,GAAGxD,6DAAS,CAACuB,SAAS,CAAC,QAAQ,CAAC,oBAAiB,IAAI,CAACiC,MAAM,CAAE,GAAGxD,6DAAS,CAACuB,SAAS,CAAC,QAAQ,CAAC,GAAG,YAAY;IAEvIpB,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEgB,MAAM,EAAE,UAAU,EAAE0D,MAAM,CAAC;IAEvE9E,+DACU,CAAC;MACPoB,MAAM,EAAEA,MAAM;MACdC,GAAG,EAAEyD,MAAM;MACXC,IAAI,EAAE;QACJtD,IAAI,EAAE;UACJQ,UAAU,EAAE;YACVZ,GAAG,EAAE,IAAI,CAACA,GAAG;YAAE;YACfe,KAAK,EAAE,IAAI,CAACmB;UACd;QACF;MACF;IACF,CAAC,CAAC,CACD/B,IAAI,CAAC,YAAM;MACViD,MAAI,CAAChB,OAAO,GAAG,KAAK;MACpBtD,OAAO,CAACC,GAAG,CAAC,+CAA+C,CAAC;MAC5DJ,8DAAU,CAAC4E,IAAI,CAAC;QAAEC,IAAI,EAAE;MAAU,CAAC,EAAE,cAAc,CAAC;MACpDJ,MAAI,CAACO,IAAI,CAAC,CAAC;MACXtD,CAAC,CAACC,MAAM,CAAC,CAAC;IACZ,CAAC,CAAC,SACI,CAAC,UAACoC,KAAK,EAAK;MAChBU,MAAI,CAAChB,OAAO,GAAG,KAAK;MACpBtD,OAAO,CAAC4D,KAAK,CAAC,yCAAyC,EAAEA,KAAK,CAAC;MAC/D/D,8DAAU,CAAC4E,IAAI,CAAC;QAAEC,IAAI,EAAE;MAAQ,CAAC,EAAE,WAAW,CAAC;MAC/CnD,CAAC,CAACC,MAAM,CAAC,CAAC;IACZ,CAAC,CAAC;EACN,CAAC;EAAA,OAAA0B,cAAA;AAAA,EAjJyCF,uEAAK;;;;;;;;;;;;;;;;;;;;;;;;;ACJD;AACK;AAClB;AACW,CAAC;AAAA,IAE1BP,UAAU,0BAAArC,UAAA;EAAA,SAAAqC,WAAA;IAAA,OAAArC,UAAA,CAAAC,KAAA,OAAAC,SAAA;EAAA;EAAAC,oFAAA,CAAAkC,UAAA,EAAArC,UAAA;EAAA,IAAAI,MAAA,GAAAiC,UAAA,CAAAhC,SAAA;EAAAD,MAAA,CAC7BiB,IAAI,GAAJ,SAAAA,IAAIA,CAAA,EAAG;IACL,OACEF,CAAA;MAAKG,SAAS,EAAC;IAA8B,GAC3CH,CAAA;MAAIG,SAAS,EAAC;IAA0B,GACtCH,CAAA;MAAIG,SAAS,EAAC;IAAoB,GAChCH,CAAA,CAAC0B,wEAAM;MACLvB,SAAS,EAAC,gBAAgB;MAC1ByC,OAAO,EAAE,SAATA,OAAOA,CAAA;QAAA,OAAQtE,6DAAS,CAAC4E,IAAI,CAACvB,uDAAc,CAAC;MAAA,CAAC,CAAC;IAAA,GAChD,0BAEO,CACN,CACF,CACD,CAAC;EAEV,CAAC;EAAA,OAAAT,UAAA;AAAA,EAhBqCvC,gEAAS;;;;;;;;;;;;;;;;;;;;ACLd;AACW;AACY;AACP;AAEnDL,oEAAgB,CAACE,GAAG,CAAC,gBAAgB,EAAE,YAAM;EAC3C;EACAgF,4DAAM,CAACvC,oFAAmB,EAAE,UAAU,EAAE,UAACwC,KAAK,EAAK;IACjDA,KAAK,CAACjF,GAAG,CACP,KAAK,EACLwB,CAAC,CACC,GAAG,EACH;MACEM,IAAI,EAAEhC,6DAAS,CAAC,UAAU,CAAC;MAAE;MAC7BsE,OAAO,EAAE,SAATA,OAAOA,CAAGD,CAAC,EAAK;QACdA,CAAC,CAACK,cAAc,CAAC,CAAC,CAAC,CAAC;QACpBhD,CAAC,CAAC0D,KAAK,CAACC,GAAG,CAACrF,6DAAS,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;MACtC,CAAC;MACD6B,SAAS,EAAE,SAAS,CAAE;IACxB,CAAC,EACD;IACE;IACAH,CAAC,CAAC,GAAG,EAAE;MAAEG,SAAS,EAAE,6BAA6B;MAAE,aAAa,EAAE;IAAO,CAAC,CAAC;IAC3E;IACAH,CAAC,CAAC,MAAM,EAAE;MAAEG,SAAS,EAAE;IAAe,CAAC,EAAE,MAAM,CAAC,CAEpD,CAAC,EACD,CAAC,EACH,CAAC;EACH,CAAC,CAAC;;EAEF;EACA7B,gEAAU,CAAC,UAAU,CAAC,GAAG;IACvBuF,IAAI,EAAE,MAAM;IACZC,SAAS,EAAE3C,+DAAW,CAAE;EAC1B,CAAC;EAED1C,OAAO,CAACC,GAAG,CAAC,2DAA2D,CAAC;AAC1E,CAAC,CAAC;;;;;;;;;;;ACtCF;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;ACAiD;AACjD,SAASM,cAAcA,CAACgF,CAAC,EAAEC,CAAC,EAAE;EAC5BD,CAAC,CAAC9E,SAAS,GAAGgF,MAAM,CAACC,MAAM,CAACF,CAAC,CAAC/E,SAAS,CAAC,EAAE8E,CAAC,CAAC9E,SAAS,CAACkF,WAAW,GAAGJ,CAAC,EAAED,8DAAc,CAACC,CAAC,EAAEC,CAAC,CAAC;AAC7F;;;;;;;;;;;;;;;;ACHA,SAASI,eAAeA,CAACL,CAAC,EAAErB,CAAC,EAAE;EAC7B,OAAO0B,eAAe,GAAGH,MAAM,CAACH,cAAc,GAAGG,MAAM,CAACH,cAAc,CAACjB,IAAI,CAAC,CAAC,GAAG,UAAUkB,CAAC,EAAErB,CAAC,EAAE;IAC9F,OAAOqB,CAAC,CAACM,SAAS,GAAG3B,CAAC,EAAEqB,CAAC;EAC3B,CAAC,EAAEK,eAAe,CAACL,CAAC,EAAErB,CAAC,CAAC;AAC1B;;;;;;;UCJA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;ACN6B","sources":["webpack://@shebaoting/rss/./src/common/index.ts","webpack://@shebaoting/rss/./src/forum/components/RssFeedList.js","webpack://@shebaoting/rss/./src/forum/components/RssFeedPage.js","webpack://@shebaoting/rss/./src/forum/components/RssSubmitModal.js","webpack://@shebaoting/rss/./src/forum/components/RssToolbar.js","webpack://@shebaoting/rss/./src/forum/index.js","webpack://@shebaoting/rss/external root \"flarum.core.compat['common/Component']\"","webpack://@shebaoting/rss/external root \"flarum.core.compat['common/app']\"","webpack://@shebaoting/rss/external root \"flarum.core.compat['common/components/Button']\"","webpack://@shebaoting/rss/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@shebaoting/rss/external root \"flarum.core.compat['common/components/Page']\"","webpack://@shebaoting/rss/external root \"flarum.core.compat['common/extend']\"","webpack://@shebaoting/rss/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@shebaoting/rss/external root \"flarum.core.compat['forum/app']\"","webpack://@shebaoting/rss/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@shebaoting/rss/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@shebaoting/rss/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@shebaoting/rss/webpack/bootstrap","webpack://@shebaoting/rss/webpack/runtime/compat get default export","webpack://@shebaoting/rss/webpack/runtime/define property getters","webpack://@shebaoting/rss/webpack/runtime/hasOwnProperty shorthand","webpack://@shebaoting/rss/webpack/runtime/make namespace object","webpack://@shebaoting/rss/./forum.ts"],"sourcesContent":["import app from 'flarum/common/app';\n\napp.initializers.add('shebaoting/rss', () => {\n  console.log('[shebaoting/rss] Hello, forum and admin!');\n});\n","import Component from 'flarum/common/Component';\n\nexport default class RssFeedList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.feeds = [];\n    this.loadFeeds();\n  }\n\n  loadFeeds() {\n    app\n      .request({\n        method: 'GET',\n        url: app.forum.attribute('apiUrl') + '/rss-items',\n      })\n      .then((feeds) => {\n        this.feeds = feeds.data;\n        m.redraw();\n      });\n  }\n\n  view() {\n    return (\n      <div className=\"RssFeedList\">\n        <div className=\"DiscussionList\">\n          <ul class=\"DiscussionList-discussions\">\n            {this.feeds.map((feed) => (\n              <li>\n                <div class=\"DiscussionListItem\">\n                  <div className=\"DiscussionListItem-content Slidable-content read\">\n                    <a href={feed.attributes.link} target=\"_blank\" className=\"DiscussionListItem-main\">\n                      <h2 class=\"DiscussionListItem-title\">{feed.attributes.title}</h2>\n                      <ul class=\"DiscussionListItem-info\">\n                        <li class=\"item-tags\">\n                          <span class=\"TagsLabel\">\n                            <span class=\"TagLabel colored text-contrast--light TagLabel--child\" style=\"--tag-bg: #6b7eb7;\">\n                              <span class=\"TagLabel-text\">\n                                <i class=\"TagLabel-icon icon fas iconfont icon-php\"></i>\n                                <span class=\"TagLabel-name\">{feed.attributes.site_name}</span>\n                              </span>\n                            </span>\n                          </span>\n                        </li>\n\n                        <li class=\"item-terminalPost\">\n                          <span>\n                            发布于 <time>{feed.attributes.published_at}</time>\n                          </span>\n                        </li>\n                      </ul>\n                    </a>\n                  </div>\n                </div>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport listItems from 'flarum/common/helpers/listItems';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport RssFeedList from './RssFeedList';\nimport RssToolbar from './RssToolbar';\nexport default class RssFeedPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n    app.setTitle('RSS Aggregator'); // 设置页面标题\n  }\n\n  view() {\n    return (\n      <div className=\"IndexPage\">\n        {IndexPage.prototype.hero()} {/* 复用 IndexPage 的头部样式 */}\n        <div className=\"container\">\n          <div className=\"sideNavContainer\">\n            <nav className=\"IndexPage-nav sideNav\">\n              <ul>{listItems(IndexPage.prototype.sidebarItems().toArray())}</ul> {/* 保留侧边栏 */}\n            </nav>\n            <div className=\"RssFeedListContent IndexPage-results sideNavOffset\">\n              <RssToolbar />\n              <RssFeedList /> {/* 显示 RSS 列表 */}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport app from 'flarum/forum/app';\n\nexport default class RssSubmitModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.url = ''; // 使用 url 代替 link\n    this.siteTitle = ''; // 使用 siteTitle 代替 title\n    this.feedId = null; // 用于记录当前 Feed 的 ID\n    this.loading = true; // 标记加载状态\n\n    console.log('[RssSubmitModal] Modal initialized, starting to load existing feed.');\n\n    // 加载当前用户的 RSS Feed 信息\n    this.loadExistingFeed();\n  }\n\n  loadExistingFeed() {\n    console.log('[RssSubmitModal] Sending request to load current user feed.');\n\n    app\n      .request({\n        method: 'GET',\n        url: app.forum.attribute('apiUrl') + '/user-rss-feeds', // 请求新的 API 端点\n      })\n      .then((response) => {\n        if (response.data.length > 0) {\n          const userFeed = response.data[0]; // 使用当前用户的第一个 RSS Feed\n          this.feedId = userFeed.id;\n          this.url = userFeed.attributes.url;\n          this.siteTitle = userFeed.attributes.title;\n          console.log('[RssSubmitModal] Found user feed:', userFeed);\n        } else {\n          console.log('[RssSubmitModal] No existing feed found for the user.');\n        }\n\n        this.loading = false; // 加载完成\n        m.redraw(); // 强制 Mithril 重新渲染组件\n      })\n      .catch((error) => {\n        console.error('[RssSubmitModal] Error loading existing feed:', error);\n        this.loading = false;\n        m.redraw();\n      });\n  }\n\n  className() {\n    return 'RssSubmitModal Modal--small';\n  }\n\n  title() {\n    return '提交 RSS 站点';\n  }\n\n  content() {\n    // 如果数据仍在加载中，显示加载状态\n    if (this.loading) {\n      console.log('[RssSubmitModal] Loading feed data, showing loading state.');\n      return (\n        <div className=\"Modal-body\">\n          <p>加载中...</p>\n        </div>\n      );\n    }\n\n    console.log('[RssSubmitModal] Feed data loaded, rendering form with URL:', this.url, 'and siteTitle:', this.siteTitle);\n\n    // 数据加载完成后显示表单\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form-group\">\n          <label>站点名称</label>\n          <input\n            className=\"FormControl\"\n            placeholder=\"请输入站点名称\"\n            value={this.siteTitle}\n            oninput={(e) => {\n              this.siteTitle = e.target.value; // 捕获站点名称\n              console.log('[RssSubmitModal] Updated siteTitle:', this.siteTitle);\n            }}\n          />\n        </div>\n        <div className=\"Form-group\">\n          <label>RSS 链接</label>\n          <input\n            className=\"FormControl\"\n            placeholder=\"请输入 RSS 链接\"\n            value={this.url} // 使用 url 代替 link\n            oninput={(e) => {\n              this.url = e.target.value; // 捕获 RSS 链接\n              console.log('[RssSubmitModal] Updated URL:', this.url);\n            }}\n          />\n        </div>\n        <div className=\"Form-group\">\n          <Button className=\"Button Button--primary\" onclick={this.onsubmit.bind(this)} loading={this.loading}>\n            提交\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  // 提交表单\n  onsubmit(e) {\n    e.preventDefault();\n    this.loading = true;\n    console.log('[RssSubmitModal] Submitting form with URL:', this.url, 'and siteTitle:', this.siteTitle);\n\n    // 检查是否为空\n    if (!this.url || !this.siteTitle) {\n      app.alerts.show({ type: 'error' }, 'RSS 链接和站点名称不能为空');\n      this.loading = false;\n      return;\n    }\n\n    const method = this.feedId ? 'PATCH' : 'POST'; // 如果有 feedId，则更新，否则创建\n    const apiUrl = this.feedId ? app.forum.attribute('apiUrl') + `/rss-feeds/${this.feedId}` : app.forum.attribute('apiUrl') + '/rss-feeds';\n\n    console.log('[RssSubmitModal] API method:', method, 'API URL:', apiUrl);\n\n    app\n      .request({\n        method: method,\n        url: apiUrl,\n        body: {\n          data: {\n            attributes: {\n              url: this.url, // 提交 URL\n              title: this.siteTitle,\n            },\n          },\n        },\n      })\n      .then(() => {\n        this.loading = false;\n        console.log('[RssSubmitModal] Form submitted successfully.');\n        app.alerts.show({ type: 'success' }, 'RSS 站点已成功提交！');\n        this.hide();\n        m.redraw();\n      })\n      .catch((error) => {\n        this.loading = false;\n        console.error('[RssSubmitModal] Error submitting form:', error);\n        app.alerts.show({ type: 'error' }, '提交失败，请重试。');\n        m.redraw();\n      });\n  }\n}\n","import Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport app from 'flarum/forum/app';\nimport RssSubmitModal from './RssSubmitModal'; // 引入自定义 Modal\n\nexport default class RssToolbar extends Component {\n  view() {\n    return (\n      <div className=\"IndexPage-toolbar rss-subsec\">\n        <ul className=\"IndexPage-toolbar-action\">\n          <li className=\"item-markAllAsRead\">\n            <Button\n              className=\"Button hasIcon\"\n              onclick={() => app.modal.show(RssSubmitModal)} // 点击按钮时显示 Modal\n            >\n              提交站点\n            </Button>\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport RssFeedPage from './components/RssFeedPage';\n\napp.initializers.add('shebaoting/rss', () => {\n  // 添加 RSS 导航链接\n  extend(IndexPage.prototype, 'navItems', (items) => {\n    items.add(\n      'rss',\n      m(\n        'a',\n        {\n          href: app.route('rss.feed'), // 使用 Flarum 的路由系统\n          onclick: (e) => {\n            e.preventDefault(); // 阻止默认行为\n            m.route.set(app.route('rss.feed')); // 使用 Mithril 跳转到 RSS 页面\n          },\n          className: 'hasIcon', // 为链接添加类名\n        },\n        [\n          // 图标部分\n          m('i', { className: 'icon fas fa-rss Button-icon', 'aria-hidden': 'true' }),\n          // 文本部分\n          m('span', { className: 'Button-label' }, '独立博客'),\n        ]\n      ),\n      -10\n    );\n  });\n\n  // 注册路由\n  app.routes['rss.feed'] = {\n    path: '/rss',\n    component: RssFeedPage, // 使用 RSS 页面组件\n  };\n\n  console.log('[shebaoting/rss] RSS Aggregator link added to the navbar!');\n});\n","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/app'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/Modal'];","module.exports = flarum.core.compat['common/components/Page'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/helpers/listItems'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/IndexPage'];","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/common';\nexport * from './src/forum';\n"],"names":["app","initializers","add","console","log","Component","RssFeedList","_Component","apply","arguments","_inheritsLoose","_proto","prototype","oninit","vnode","call","feeds","loadFeeds","_this","request","method","url","forum","attribute","then","data","m","redraw","view","className","map","feed","href","attributes","link","target","title","style","site_name","published_at","default","Page","listItems","IndexPage","RssToolbar","RssFeedPage","_Page","setTitle","hero","sidebarItems","toArray","Modal","Button","RssSubmitModal","_Modal","siteTitle","feedId","loading","loadExistingFeed","response","length","userFeed","id","error","content","_this2","placeholder","value","oninput","e","onclick","onsubmit","bind","_this3","preventDefault","alerts","show","type","apiUrl","body","hide","modal","extend","items","route","set","routes","path","component","setPrototypeOf","t","o","Object","create","constructor","_setPrototypeOf","__proto__"],"sourceRoot":""}