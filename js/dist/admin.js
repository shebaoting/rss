(()=>{var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};(()=>{"use strict";const e=flarum.core.compat["common/app"];t.n(e)().initializers.add("shebaoting/rss",(function(){console.log("[shebaoting/rss] Hello, forum and admin!")}));const n=flarum.core.compat["admin/app"];var o=t.n(n);function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,a(t,e)}const s=flarum.core.compat["common/Model"];var i=t.n(s),l=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).id=i().attribute("id"),e.title=i().attribute("title"),e.url=i().attribute("url"),e.status=i().attribute("status"),e.userId=i().attribute("user_id"),e.createdAt=i().attribute("created_at"),e}return r(e,t),e}(i());const u=flarum.core.compat["admin/components/ExtensionPage"];var c=t.n(u);const d=flarum.core.compat["common/components/Button"];var p=t.n(d);const f=flarum.core.compat["common/components/Switch"];var h=t.n(f);const g=flarum.core.compat["common/utils/withAttr"];var b=t.n(g);const v=flarum.core.compat["common/components/LoadingIndicator"];var y=t.n(v),F=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.oninit=function(e){var n=this;t.prototype.oninit.call(this,e),this.loadingFeeds=!0,o().store.find("rss-feeds").then((function(t){n.loadingFeeds=!1,m.redraw()}))},n.content=function(){var t=this,e=o().store.all("rss-feeds");return m("div",{className:"container RssFeed-container"},m("h2",null,o().translator.trans("shebaoting-rss.admin.page.title")),this.loadingFeeds?m(y(),null):m("table",{className:"Table RssFeedTable"}," ",m("thead",null,m("tr",null,m("th",null,o().translator.trans("shebaoting-rss.admin.page.heading.title")),m("th",null,o().translator.trans("shebaoting-rss.admin.page.heading.url")),m("th",null,o().translator.trans("shebaoting-rss.admin.page.heading.status")),m("th",null,o().translator.trans("shebaoting-rss.admin.page.heading.actions")))),m("tbody",null,e.map((function(e){return m("tr",{key:e.id()},m("td",null,m("td",null,m("input",{className:"FormControl",type:"text",value:e.title(),oninput:b()("value",(function(t){return e.pushAttributes({title:t})})),onblur:b()("value",(function(n){return t.updateFeed(e,"title",n)}))}))),m("td",null,m("input",{className:"FormControl",type:"text",value:e.url(),oninput:b()("value",(function(n){return t.updateFeed(e,"url",n)}))})),m("td",{class:"status"},h().component({state:"approved"===e.status(),onchange:function(){return t.toggleApproval(e)}})),m("td",null,p().component({className:"Button Button--danger",icon:"fas fa-trash",onclick:function(){return t.deleteFeed(e)}},o().translator.trans("shebaoting-rss.admin.page.delete"))))})))))},n.toggleApproval=function(t){var e="approved"===t.status()?"pending":"approved";t.save({status:e})},n.updateFeed=function(t,e,n){var o;t.save((o={},o[e]=n,o),{method:"PATCH"}).then((function(){console.log("Feed updated successfully")})).catch((function(t){console.error("Error updating feed:",t)}))},n.deleteFeed=function(t){t.delete({method:"DELETE"}).then((function(){return m.redraw()}))},e}(c());o().initializers.add("shebaoting-rss",(function(){o().store.models["rss-feeds"]=l,o().extensionData.for("shebaoting-rss").registerPage(F)}))})(),module.exports={}})();
//# sourceMappingURL=admin.js.map